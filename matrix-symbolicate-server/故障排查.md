# æ•…éšœæ’æŸ¥æŒ‡å— ğŸ”§

æœ¬æ–‡æ¡£å¸®åŠ©ä½ è§£å†³ä½¿ç”¨ Matrix ç¬¦å·åŒ–æœåŠ¡æ—¶å¯èƒ½é‡åˆ°çš„å¸¸è§é—®é¢˜ã€‚

## ğŸ“¦ ä¾èµ–å®‰è£…é—®é¢˜

### é—®é¢˜ï¼šgo mod download å¤±è´¥

**ç—‡çŠ¶ï¼š**
```
tls: failed to verify certificate: x509: OSStatus -26276
```

**è§£å†³æ–¹æ¡ˆ 1 - ä½¿ç”¨ Go ä»£ç†ï¼ˆæ¨èï¼‰ï¼š**
```bash
# ä½¿ç”¨å›½å†…é•œåƒ
export GOPROXY=https://goproxy.cn,direct
go mod download

# æˆ–ä½¿ç”¨å®˜æ–¹ä»£ç†
export GOPROXY=https://proxy.golang.org,direct
go mod download
```

**è§£å†³æ–¹æ¡ˆ 2 - è·³è¿‡ TLS éªŒè¯ï¼ˆä¸æ¨èï¼‰ï¼š**
```bash
export GOINSECURE=*
go mod download
```

**è§£å†³æ–¹æ¡ˆ 3 - æ›´æ–° Go ç‰ˆæœ¬ï¼š**
```bash
# æ£€æŸ¥ Go ç‰ˆæœ¬
go version

# å¦‚æœç‰ˆæœ¬è¾ƒæ—§ï¼Œå‡çº§åˆ° 1.21+
brew upgrade go
```

**è§£å†³æ–¹æ¡ˆ 4 - ç›´æ¥è¿è¡Œï¼ˆä¾èµ–ä¼šè‡ªåŠ¨ä¸‹è½½ï¼‰ï¼š**
```bash
# è¿è¡Œæ—¶è‡ªåŠ¨ä¸‹è½½ä¾èµ–
go run main.go symbolicate.go
```

### é—®é¢˜ï¼šgo.sum æ–‡ä»¶ç¼ºå¤±

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
go mod tidy
```

## ğŸš€ å¯åŠ¨é—®é¢˜

### é—®é¢˜ï¼šç«¯å£è¢«å ç”¨

**ç—‡çŠ¶ï¼š**
```
bind: address already in use
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ–¹æ³• 1: ä½¿ç”¨ä¸åŒç«¯å£
PORT=9000 ./start.sh

# æ–¹æ³• 2: æŸ¥æ‰¾å¹¶ç»ˆæ­¢å ç”¨è¿›ç¨‹
lsof -ti:8080 | xargs kill -9

# æ–¹æ³• 3: æŸ¥çœ‹å ç”¨è¿›ç¨‹
lsof -i :8080
```

### é—®é¢˜ï¼šæƒé™ä¸è¶³

**ç—‡çŠ¶ï¼š**
```
mkdir: cannot create directory: Permission denied
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ç¡®ä¿ç›®å½•æƒé™æ­£ç¡®
chmod 755 .
mkdir -p uploads dsyms reports static

# æˆ–ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œï¼ˆä¸æ¨èï¼‰
sudo ./start.sh
```

### é—®é¢˜ï¼šæ‰¾ä¸åˆ° static ç›®å½•

**ç—‡çŠ¶ï¼š**
```
404 Not Found
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ç¡®ä¿ static ç›®å½•å­˜åœ¨
mkdir -p static

# æ£€æŸ¥ index.html æ˜¯å¦å­˜åœ¨
ls static/index.html
```

## ğŸ” ç¬¦å·åŒ–é—®é¢˜

### é—®é¢˜ï¼šæœªæ‰¾åˆ° atos å‘½ä»¤

**ç—‡çŠ¶ï¼š**
```
exec: "atos": executable file not found
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥ atos æ˜¯å¦å­˜åœ¨
which atos

# å¦‚æœä¸å­˜åœ¨ï¼Œå®‰è£… Xcode å‘½ä»¤è¡Œå·¥å…·
xcode-select --install

# éªŒè¯å®‰è£…
atos --version
```

### é—®é¢˜ï¼šæœªæ‰¾åˆ° dwarfdump å‘½ä»¤

**ç—‡çŠ¶ï¼š**
```
exec: "dwarfdump": executable file not found
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# å®‰è£… Xcode å‘½ä»¤è¡Œå·¥å…·
xcode-select --install

# æˆ–å®‰è£…å®Œæ•´çš„ Xcode
# ä» App Store å®‰è£… Xcode
```

### é—®é¢˜ï¼šç¬¦å·åŒ–å¤±è´¥ - UUID ä¸åŒ¹é…

**ç—‡çŠ¶ï¼š**
```
æœªæ‰¾åˆ°åŒ¹é…çš„ç¬¦å·è¡¨
```

**è§£å†³æ–¹æ¡ˆï¼š**

1. **æ£€æŸ¥ dSYM çš„ UUIDï¼š**
```bash
dwarfdump --uuid path/to/MatrixTestApp.app/MatrixTestApp
```

2. **æ£€æŸ¥æŠ¥å‘Šä¸­çš„ UUIDï¼š**
æ‰“å¼€æŠ¥å‘Š JSON æ–‡ä»¶ï¼ŒæŸ¥æ‰¾ `binary_images` ä¸­çš„ UUIDã€‚

3. **ç¡®ä¿ç‰ˆæœ¬åŒ¹é…ï¼š**
- ä½¿ç”¨ä¸æŠ¥å‘Šå¯¹åº”ç‰ˆæœ¬çš„ dSYM
- é‡æ–°ç¼–è¯‘åº”ç”¨å¹¶ç«‹å³ç”ŸæˆæŠ¥å‘Š
- åŒä¸€å° Mac ä¸Šç¼–è¯‘å’Œç¬¦å·åŒ–

4. **é‡æ–°ä¸Šä¼  dSYMï¼š**
```bash
# åˆ é™¤æ—§çš„ dSYM
rm dsyms/*

# ä» DerivedData è·å–æœ€æ–°çš„
cd ~/Library/Developer/Xcode/DerivedData/MatrixTestApp-*/Build/Products/Debug-iphonesimulator/
zip -r ~/Desktop/latest.dSYM.zip MatrixTestApp.app.dSYM
```

### é—®é¢˜ï¼šç¬¦å·åŒ–åä»æ˜¾ç¤ºåœ°å€

**ç—‡çŠ¶ï¼š**
ç¬¦å·åŒ–å®Œæˆï¼Œä½†å †æ ˆä»æ˜¾ç¤º `0x123456789`ã€‚

**å¯èƒ½åŸå› å’Œè§£å†³æ–¹æ¡ˆï¼š**

1. **Release æ¨¡å¼ç¼–è¯‘ï¼ˆç¬¦å·è¢«å‰¥ç¦»ï¼‰**
   - ç¡®ä¿ Build Settings â†’ Debug Information Format = DWARF with dSYM
   - ç¡®ä¿ Strip Debug Symbols = NO (Debug æ¨¡å¼)

2. **æ¶æ„ä¸åŒ¹é…**
   - æ£€æŸ¥æŠ¥å‘Šä¸­çš„æ¶æ„ï¼ˆarm64 æˆ– x86_64ï¼‰
   - ç¡®ä¿ dSYM åŒ…å«å¯¹åº”æ¶æ„

3. **åŠ è½½åœ°å€é”™è¯¯**
   - æŠ¥å‘Šä¸­çš„ `load_address` å¯èƒ½ä¸å‡†ç¡®
   - æ£€æŸ¥ `binary_images` ä¸­çš„ `image_addr`

4. **dSYM æ–‡ä»¶æŸå**
   - é‡æ–°å¯¼å‡º dSYM
   - éªŒè¯ zip æ–‡ä»¶å®Œæ•´æ€§

### é—®é¢˜ï¼šæ²¡æœ‰åº”ç”¨ä»£ç æ ‡è®°

**ç—‡çŠ¶ï¼š**
ç¬¦å·åŒ–æˆåŠŸï¼Œä½†æ²¡æœ‰ ğŸ‘‰ æ ‡è®°ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦æ­£ç¡®è¯†åˆ«ï¼š
- âœ… åº”ç”¨ä»£ç ï¼šViewController.mm, MyClass.swift
- âŒ æ¡†æ¶ä»£ç ï¼šKSCrash.m, WCBlockMonitor.mm, Matrix*.mm

å¦‚æœä½ çš„æ–‡ä»¶ä»¥ KSã€WCã€Matrix å¼€å¤´ï¼Œéœ€è¦ä¿®æ”¹ `symbolicate.go` ä¸­çš„è¿‡æ»¤è§„åˆ™ã€‚

## ğŸ“‚ æ–‡ä»¶ä¸Šä¼ é—®é¢˜

### é—®é¢˜ï¼šæ–‡ä»¶ä¸Šä¼ å¤±è´¥

**ç—‡çŠ¶ï¼š**
```
æ–‡ä»¶ä¸Šä¼ å¤±è´¥: request entity too large
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥æ–‡ä»¶å¤§å°
ls -lh your-file.dSYM.zip

# å¦‚æœè¶…è¿‡ 500MBï¼Œå‹ç¼©æˆ–åˆ†å‰²æ–‡ä»¶
zip -r -9 compressed.dSYM.zip MatrixTestApp.app.dSYM
```

### é—®é¢˜ï¼šä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼

**ç—‡çŠ¶ï¼š**
```
ä»…æ”¯æŒ .dSYM.zip æˆ– .app æ–‡ä»¶
```

**è§£å†³æ–¹æ¡ˆï¼š**

1. **dSYM æ–‡ä»¶ï¼š**
```bash
# å¿…é¡»æ˜¯ zip æ ¼å¼
zip -r MatrixTestApp.dSYM.zip MatrixTestApp.app.dSYM
```

2. **App æ–‡ä»¶ï¼š**
```bash
# å¯ä»¥ç›´æ¥ä¸Šä¼  .app ç›®å½•ï¼ˆéœ€è¦å…ˆå‹ç¼©ï¼‰
zip -r MatrixTestApp.app.zip MatrixTestApp.app
# ç„¶åé‡å‘½åä¸º .app
mv MatrixTestApp.app.zip MatrixTestApp.app
```

3. **æŠ¥å‘Šæ–‡ä»¶ï¼š**
```bash
# å¿…é¡»æ˜¯ .json æˆ– .txt æ ¼å¼
cp report.log report.json
```

## ğŸŒ Web ç•Œé¢é—®é¢˜

### é—®é¢˜ï¼šé¡µé¢æ— æ³•è®¿é—®

**ç—‡çŠ¶ï¼š**
æµè§ˆå™¨æ˜¾ç¤ºã€Œæ— æ³•è®¿é—®æ­¤ç½‘ç«™ã€ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

1. **æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œï¼š**
```bash
ps aux | grep matrix-server
```

2. **æ£€æŸ¥ç«¯å£ï¼š**
```bash
curl http://localhost:8080/api/health
```

3. **æ£€æŸ¥é˜²ç«å¢™ï¼š**
```bash
# macOS
sudo pfctl -s rules

# ä¸´æ—¶å…³é—­é˜²ç«å¢™æµ‹è¯•
sudo pfctl -d
```

4. **ä½¿ç”¨æ­£ç¡®çš„åœ°å€ï¼š**
- âœ… http://localhost:8080
- âœ… http://127.0.0.1:8080
- âŒ https://localhost:8080 (ä¸æ”¯æŒ HTTPS)

### é—®é¢˜ï¼šCORS é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
Access to fetch at 'http://...' from origin '...' has been blocked by CORS policy
```

**è§£å†³æ–¹æ¡ˆï¼š**

è¿™é€šå¸¸ä¸ä¼šå‘ç”Ÿï¼Œå› ä¸ºå‰ç«¯å’Œåç«¯åœ¨åŒä¸€åŸŸåã€‚å¦‚æœé‡åˆ°ï¼š

1. **æ£€æŸ¥æ˜¯å¦ä»æ–‡ä»¶ç³»ç»Ÿæ‰“å¼€ï¼š**
   - âŒ file:///path/to/index.html
   - âœ… http://localhost:8080/

2. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼š**
   - Chrome: Cmd+Shift+R
   - Safari: Cmd+Option+E

### é—®é¢˜ï¼šæ‹–æ‹½ä¸Šä¼ æ— å“åº”

**è§£å†³æ–¹æ¡ˆï¼š**

1. **ä½¿ç”¨æ”¯æŒçš„æµè§ˆå™¨ï¼š**
   - Chrome 90+
   - Safari 14+
   - Firefox 88+

2. **æ£€æŸ¥ JavaScript æ˜¯å¦å¯ç”¨ï¼š**
   - Safari: åå¥½è®¾ç½® â†’ é«˜çº§ â†’ æ˜¾ç¤ºå¼€å‘èœå•
   - å¼€å‘ â†’ åœç”¨ JavaScript (å–æ¶ˆå‹¾é€‰)

3. **ä½¿ç”¨ç‚¹å‡»ä¸Šä¼ ï¼š**
   - ç‚¹å‡»ä¸Šä¼ åŒºåŸŸé€‰æ‹©æ–‡ä»¶

## ğŸ’¾ å­˜å‚¨é—®é¢˜

### é—®é¢˜ï¼šç£ç›˜ç©ºé—´ä¸è¶³

**ç—‡çŠ¶ï¼š**
```
no space left on device
```

**è§£å†³æ–¹æ¡ˆï¼š**

1. **æ¸…ç†æ—§æ–‡ä»¶ï¼š**
```bash
# æŸ¥çœ‹å ç”¨
du -sh dsyms/ reports/ uploads/

# åˆ é™¤ 30 å¤©å‰çš„æ–‡ä»¶
find dsyms/ -mtime +30 -delete
find reports/ -mtime +30 -delete
```

2. **ç§»åŠ¨åˆ°æ›´å¤§çš„ç£ç›˜ï¼š**
```bash
# ç§»åŠ¨æ•°æ®ç›®å½•
mv dsyms /Volumes/ExternalDisk/matrix-data/dsyms
ln -s /Volumes/ExternalDisk/matrix-data/dsyms dsyms
```

### é—®é¢˜ï¼šæ–‡ä»¶æƒé™é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
permission denied
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ä¿®å¤æƒé™
chmod -R 755 dsyms/ reports/ uploads/

# ä¿®å¤æ‰€æœ‰è€…
chown -R $(whoami) dsyms/ reports/ uploads/
```

## ğŸ”¨ ç¼–è¯‘é—®é¢˜

### é—®é¢˜ï¼šç¼–è¯‘å¤±è´¥

**ç—‡çŠ¶ï¼š**
```
undefined: timeNowUnix
```

**è§£å†³æ–¹æ¡ˆï¼š**

è¿™æ˜¯ä»£ç ä¸­çš„å ä½å‡½æ•°ï¼Œéœ€è¦å®ç°ï¼š

```go
// åœ¨ symbolicate.go ä¸­æ‰¾åˆ° timeNowUnix å‡½æ•°
func timeNowUnix() int64 {
    return 0  // ä¿®æ”¹ä¸º
}

// æ”¹ä¸º
func timeNowUnix() int64 {
    return time.Now().Unix()
}
```

### é—®é¢˜ï¼šåŒ…å¯¼å…¥é”™è¯¯

**ç—‡çŠ¶ï¼š**
```
package time is not in GOROOT
```

**è§£å†³æ–¹æ¡ˆï¼š**

åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ  importï¼š

```go
import (
    "time"
    // ... å…¶ä»–å¯¼å…¥
)
```

## ğŸ› è°ƒè¯•æŠ€å·§

### å¯ç”¨è¯¦ç»†æ—¥å¿—

```bash
# è¿è¡Œæ—¶å¯ç”¨è°ƒè¯•æ¨¡å¼
GIN_MODE=debug go run main.go symbolicate.go
```

### æŸ¥çœ‹è¯¦ç»†é”™è¯¯

åœ¨ Go ä»£ç ä¸­æ·»åŠ ï¼š

```go
log.Printf("è°ƒè¯•ä¿¡æ¯: %+v", someVariable)
```

### æµ‹è¯• API

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/api/health

# åˆ—å‡ºç¬¦å·è¡¨
curl http://localhost:8080/api/dsym/list

# åˆ—å‡ºæŠ¥å‘Š
curl http://localhost:8080/api/report/list
```

### æ‰‹åŠ¨ç¬¦å·åŒ–æµ‹è¯•

```bash
# æµ‹è¯• atos å‘½ä»¤
atos -arch arm64 \
     -o MatrixTestApp.app/MatrixTestApp \
     -l 0x100000000 \
     0x102abc123
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼š

1. **æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—ï¼š**
   - è¿è¡ŒæœåŠ¡çš„ç»ˆç«¯è¾“å‡º
   - æŸ¥æ‰¾ ERROR æˆ– WARN çº§åˆ«çš„æ—¥å¿—

2. **æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ï¼š**
   - Chrome: Cmd+Option+J
   - Safari: Cmd+Option+C
   - æŸ¥æ‰¾çº¢è‰²é”™è¯¯ä¿¡æ¯

3. **æ£€æŸ¥ç³»ç»Ÿè¦æ±‚ï¼š**
   - macOS 10.15+
   - Go 1.21+
   - Xcode å‘½ä»¤è¡Œå·¥å…·

4. **é‡æ–°å¼€å§‹ï¼š**
```bash
# æ¸…ç†å¹¶é‡æ–°å¼€å§‹
make clean
rm -rf dsyms/* reports/* uploads/*
make install
make run
```

5. **æäº¤ Issueï¼š**
   - åŒ…å«å®Œæ•´çš„é”™è¯¯ä¿¡æ¯
   - è¯´æ˜æ“ä½œç³»ç»Ÿç‰ˆæœ¬
   - æä¾›å¤ç°æ­¥éª¤

## ğŸ¯ å¸¸è§ä½¿ç”¨é”™è¯¯

### âŒ é”™è¯¯åšæ³•

1. ä¸Šä¼  Release æ¨¡å¼ç¼–è¯‘çš„ dSYM
2. æ··æ·†ä¸åŒç‰ˆæœ¬çš„ç¬¦å·è¡¨å’ŒæŠ¥å‘Š
3. åœ¨ Windows/Linux ä¸Šä½¿ç”¨ï¼ˆä¸æ”¯æŒ atosï¼‰
4. ä¸Šä¼ æœªå‹ç¼©çš„ dSYM ç›®å½•
5. å¿˜è®°å®‰è£… Xcode å‘½ä»¤è¡Œå·¥å…·

### âœ… æ­£ç¡®åšæ³•

1. ä½¿ç”¨ Debug æ¨¡å¼ç¼–è¯‘
2. ç¼–è¯‘åç«‹å³è·å– dSYM å’ŒæŠ¥å‘Š
3. ä»…åœ¨ macOS ä¸Šä½¿ç”¨
4. æ­£ç¡®å‹ç¼©ä¸º .zip æ ¼å¼
5. æå‰å®‰è£…æ‰€æœ‰ä¾èµ–

## ğŸ“š æ›´å¤šèµ„æº

- ä¸»æ–‡æ¡£: README.md
- å¿«é€Ÿå¼€å§‹: QUICKSTART.md
- æ¶æ„è®¾è®¡: ARCHITECTURE.md
- éƒ¨ç½²æŒ‡å—: DEPLOY.md

---

**ä»æœ‰é—®é¢˜ï¼Ÿ** æ¬¢è¿æäº¤ Issue æˆ–æŸ¥çœ‹é¡¹ç›® Wikiã€‚

